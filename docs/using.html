<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Using Crosstalk</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/d3-3.5.9/d3.min.js"></script>
<link href="site_libs/d3scatter-0.0.0/d3scatter.css" rel="stylesheet" />
<script src="site_libs/d3scatter-0.0.0/d3scatter.js"></script>
<script src="site_libs/d3scatter-binding-0.1.0/d3scatter.js"></script>
<link href="site_libs/crosstalk-1.2.1.9000/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.1.9000/js/crosstalk.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-grid-3.4.1/bootstrap-grid.min.css" rel="stylesheet" />
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.2.2/leaflet.js"></script>
<link href="site_libs/leaflet-easybutton-1.3.1/easy-button.css" rel="stylesheet" />
<script src="site_libs/leaflet-easybutton-1.3.1/easy-button.js"></script>
<script src="site_libs/leaflet-easybutton-1.3.1/EasyButton-binding.js"></script>
<link href="site_libs/leaflet-locationfilter2-0.1.1/locationfilter.css" rel="stylesheet" />
<script src="site_libs/leaflet-locationfilter2-0.1.1/locationfilter.js"></script>
<script src="site_libs/leaflet-locationfilter2-0.1.1/locationfilter-bindings.js"></script>
<link href="site_libs/ionicons-2.0.1/ionicons.min.css" rel="stylesheet" />
<script src="site_libs/ionrangeslider-javascript-2.3.1/js/ion.rangeSlider.min.js"></script>
<script src="site_libs/strftime-0.9.2/strftime-min.js"></script>
<link href="site_libs/ionrangeslider-css-2.3.1/css/ion.rangeSlider.css" rel="stylesheet" />
<link href="site_libs/selectize-0.12.4/css/selectize.bootstrap3.css" rel="stylesheet" />
<script src="site_libs/selectize-0.12.4/js/selectize.min.js"></script>
<link href="site_libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Crosstalk</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="using.html">Using Crosstalk</a>
</li>
<li>
  <a href="authoring.html">Authoring widgets</a>
</li>
<li>
  <a href="shiny.html">Shiny</a>
</li>
<li>
  <a href="widgets.html">Compatible widgets</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Reference (JS)
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="filter.html">FilterHandle</a>
    </li>
    <li>
      <a href="selection.html">SelectionHandle</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/crosstalk">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Using Crosstalk</h1>

</div>


<p>Crosstalk makes it easy to link multiple (Crosstalk-compatible) <a
href="http://htmlwidgets.org">HTML widgets</a> within an R Markdown page
or Shiny app. To begin, you’ll need to install the
<code>crosstalk</code> package:</p>
<pre class="r"><code>devtools::install_github(&quot;rstudio/crosstalk&quot;)</code></pre>
<p>Note that at the time of this writing, only a few HTML Widgets are
Crosstalk-compatible. This article will use a simple d3 scatter plot
widget package called <a
href="https://github.com/jcheng5/d3scatter"><code>d3scatter</code></a>,
and the development version of the <a
href="https://rstudio.github.io/leaflet">Leaflet</a> package.</p>
<pre class="r"><code>devtools::install_github(&quot;jcheng5/d3scatter&quot;)
devtools::install_github(&quot;rstudio/leaflet&quot;)</code></pre>
<p>Crosstalk is designed to work with widgets that take data frames (or
sufficiently data-frame-like objects) as input. d3scatter, for example,
takes a data frame:</p>
<pre class="r"><code>library(d3scatter)

d3scatter(iris, ~Petal.Length, ~Petal.Width, ~Species)</code></pre>
<div class="d3scatter html-widget html-fill-item" id="htmlwidget-925e964b1904f64d276e" style="width:480px;height:264px;"></div>
<script type="application/json" data-for="htmlwidget-925e964b1904f64d276e">{"x":{"data":{"x":[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5,1.5,1.6,1.4,1.1,1.2,1.5,1.3,1.4,1.7,1.5,1.7,1.5,1,1.7,1.9,1.6,1.6,1.5,1.4,1.6,1.6,1.5,1.5,1.4,1.5,1.2,1.3,1.4,1.3,1.5,1.3,1.3,1.3,1.6,1.9,1.4,1.6,1.4,1.5,1.4,4.7,4.5,4.9,4,4.6,4.5,4.7,3.3,4.6,3.9,3.5,4.2,4,4.7,3.6,4.4,4.5,4.1,4.5,3.9,4.8,4,4.9,4.7,4.3,4.4,4.8,5,4.5,3.5,3.8,3.7,3.9,5.1,4.5,4.5,4.7,4.4,4.1,4,4.4,4.6,4,3.3,4.2,4.2,4.2,4.3,3,4.1,6,5.1,5.9,5.6,5.8,6.6,4.5,6.3,5.8,6.1,5.1,5.3,5.5,5,5.1,5.3,5.5,6.7,6.9,5,5.7,4.9,6.7,4.9,5.7,6,4.8,4.9,5.6,5.8,6.1,6.4,5.6,5.1,5.6,6.1,5.6,5.5,4.8,5.4,5.6,5.1,5.1,5.9,5.7,5.2,5,5.2,5.4,5.1],"y":[0.2,0.2,0.2,0.2,0.2,0.4,0.3,0.2,0.2,0.1,0.2,0.2,0.1,0.1,0.2,0.4,0.4,0.3,0.3,0.3,0.2,0.4,0.2,0.5,0.2,0.2,0.4,0.2,0.2,0.2,0.2,0.4,0.1,0.2,0.2,0.2,0.2,0.1,0.2,0.2,0.3,0.3,0.2,0.6,0.4,0.3,0.2,0.2,0.2,0.2,1.4,1.5,1.5,1.3,1.5,1.3,1.6,1,1.3,1.4,1,1.5,1,1.4,1.3,1.4,1.5,1,1.5,1.1,1.8,1.3,1.5,1.2,1.3,1.4,1.4,1.7,1.5,1,1.1,1,1.2,1.6,1.5,1.6,1.5,1.3,1.3,1.3,1.2,1.4,1.2,1,1.3,1.2,1.3,1.3,1.1,1.3,2.5,1.9,2.1,1.8,2.2,2.1,1.7,1.8,1.8,2.5,2,1.9,2.1,2,2.4,2.3,1.8,2.2,2.3,1.5,2.3,2,2,1.8,2.1,1.8,1.8,1.8,2.1,1.6,1.9,2,2.2,1.5,1.4,2.3,2.4,1.8,1.8,2.1,2.4,2.3,1.9,2.3,2.5,2.3,1.9,2,2.3,1.8],"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"]},"color_spec":{"type":"ordinal","values":["setosa","versicolor","virginica"]},"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"],"x_label":"Petal.Length","y_label":"Petal.Width","x_lim":null,"y_lim":null,"group":null},"evals":[],"jsHooks":[]}</script>
<p>Crosstalk’s main R API is a <code>SharedData</code> R6 class. You use
this class to wrap your data frame, and pass it to a
Crosstalk-compatible widget where a data frame would normally be
expected.</p>
<pre class="r"><code>library(crosstalk)

shared_iris &lt;- SharedData$new(iris)
d3scatter(shared_iris, ~Petal.Length, ~Petal.Width, ~Species)</code></pre>
<p>(It’s not even worth showing the results–it looks just the same as
the plot above.)</p>
<div id="linked-brushing" class="section level2">
<h2>Linked brushing</h2>
<p>Things become more interesting when we pass the same
<code>SharedData</code> instance to two separate widgets: their
selection state becomes linked. (<code>bscols</code> is a simple helper
function for creating <a href="https://getbootstrap.com/">Bootstrap</a>
column layouts, used here to put two plots side by side.)</p>
<pre class="r"><code>library(crosstalk)

shared_iris &lt;- SharedData$new(iris)
bscols(
  d3scatter(shared_iris, ~Petal.Length, ~Petal.Width, ~Species, width=&quot;100%&quot;, height=300),
  d3scatter(shared_iris, ~Sepal.Length, ~Sepal.Width, ~Species, width=&quot;100%&quot;, height=300)
)</code></pre>
<div class="container-fluid crosstalk-bscols">
<div class="row">
<div class="col-xs-6">
<div id="htmlwidget-504bdde7bfdeb5a982e5" style="width:100%;height:300px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-504bdde7bfdeb5a982e5">{"x":{"data":{"x":[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5,1.5,1.6,1.4,1.1,1.2,1.5,1.3,1.4,1.7,1.5,1.7,1.5,1,1.7,1.9,1.6,1.6,1.5,1.4,1.6,1.6,1.5,1.5,1.4,1.5,1.2,1.3,1.4,1.3,1.5,1.3,1.3,1.3,1.6,1.9,1.4,1.6,1.4,1.5,1.4,4.7,4.5,4.9,4,4.6,4.5,4.7,3.3,4.6,3.9,3.5,4.2,4,4.7,3.6,4.4,4.5,4.1,4.5,3.9,4.8,4,4.9,4.7,4.3,4.4,4.8,5,4.5,3.5,3.8,3.7,3.9,5.1,4.5,4.5,4.7,4.4,4.1,4,4.4,4.6,4,3.3,4.2,4.2,4.2,4.3,3,4.1,6,5.1,5.9,5.6,5.8,6.6,4.5,6.3,5.8,6.1,5.1,5.3,5.5,5,5.1,5.3,5.5,6.7,6.9,5,5.7,4.9,6.7,4.9,5.7,6,4.8,4.9,5.6,5.8,6.1,6.4,5.6,5.1,5.6,6.1,5.6,5.5,4.8,5.4,5.6,5.1,5.1,5.9,5.7,5.2,5,5.2,5.4,5.1],"y":[0.2,0.2,0.2,0.2,0.2,0.4,0.3,0.2,0.2,0.1,0.2,0.2,0.1,0.1,0.2,0.4,0.4,0.3,0.3,0.3,0.2,0.4,0.2,0.5,0.2,0.2,0.4,0.2,0.2,0.2,0.2,0.4,0.1,0.2,0.2,0.2,0.2,0.1,0.2,0.2,0.3,0.3,0.2,0.6,0.4,0.3,0.2,0.2,0.2,0.2,1.4,1.5,1.5,1.3,1.5,1.3,1.6,1,1.3,1.4,1,1.5,1,1.4,1.3,1.4,1.5,1,1.5,1.1,1.8,1.3,1.5,1.2,1.3,1.4,1.4,1.7,1.5,1,1.1,1,1.2,1.6,1.5,1.6,1.5,1.3,1.3,1.3,1.2,1.4,1.2,1,1.3,1.2,1.3,1.3,1.1,1.3,2.5,1.9,2.1,1.8,2.2,2.1,1.7,1.8,1.8,2.5,2,1.9,2.1,2,2.4,2.3,1.8,2.2,2.3,1.5,2.3,2,2,1.8,2.1,1.8,1.8,1.8,2.1,1.6,1.9,2,2.2,1.5,1.4,2.3,2.4,1.8,1.8,2.1,2.4,2.3,1.9,2.3,2.5,2.3,1.9,2,2.3,1.8],"key":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150"],"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"]},"color_spec":{"type":"ordinal","values":["setosa","versicolor","virginica"]},"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"],"x_label":"Petal.Length","y_label":"Petal.Width","x_lim":null,"y_lim":null,"group":"SharedDatac9f6656f"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="col-xs-6">
<div id="htmlwidget-4fd9a5d7aad283f0c9ed" style="width:100%;height:300px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-4fd9a5d7aad283f0c9ed">{"x":{"data":{"x":[5.1,4.9,4.7,4.6,5,5.4,4.6,5,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5,5,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5,5.5,4.9,4.4,5.1,5,4.5,4.4,5,5.1,4.8,5.1,4.6,5.3,5,7,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5,5.9,6,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6,5.7,5.5,5.5,5.8,6,5.4,6,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"y":[3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3,3,4,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3,3.4,3.5,2.3,3.2,3.5,3.8,3,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2,3,2.2,2.9,2.9,3.1,3,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3,2.8,3,2.9,2.6,2.4,2.4,2.7,2.7,3,3.4,3.1,2.3,3,2.5,2.6,3,2.6,2.3,2.7,3,2.9,2.9,2.5,2.8,3.3,2.7,3,2.9,3,3,2.5,2.9,2.5,3.6,3.2,2.7,3,2.5,2.8,3.2,3,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3,2.8,3,2.8,3.8,2.8,2.8,2.6,3,3.4,3.1,3,3.1,3.1,3.1,2.7,3.2,3.3,3,2.5,3,3.4,3],"key":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150"],"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"]},"color_spec":{"type":"ordinal","values":["setosa","versicolor","virginica"]},"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"],"x_label":"Sepal.Length","y_label":"Sepal.Width","x_lim":null,"y_lim":null,"group":"SharedDatac9f6656f"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<p>Click and drag to brush data points in the above plots; notice that
their brushing states are linked. This is because they share the same
<code>SharedData</code> object. If you created a separated
<code>SharedData</code> object for each plot, even with the same
underlying data frame, the plots would not be linked.</p>
<p>Note that we’re not limited to linking only two plots, nor do we need
to limit ourselves to the same type of widget. Any Crosstalk-compatible
widget can be linked with any other.</p>
<pre class="r"><code>library(leaflet)

shared_quakes &lt;- SharedData$new(quakes[sample(nrow(quakes), 100),])
bscols(
  leaflet(shared_quakes, width = &quot;100%&quot;, height = 300) %&gt;%
    addTiles() %&gt;%
    addMarkers(),
  d3scatter(shared_quakes, ~depth, ~mag, width = &quot;100%&quot;, height = 300)
)</code></pre>
<div class="container-fluid crosstalk-bscols">
<div class="row">
<div class="col-xs-6">
<div id="htmlwidget-310b7e3b2c6b24e9c363" style="width:100%;height:300px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-310b7e3b2c6b24e9c363">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addSelect","args":["SharedData6a364abe"]},{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addMarkers","args":[[-15.54,-26.1,-25.06,-31.94,-17.99,-15.17,-22.14,-24.33,-18.16,-33.09,-11.7,-19.88,-30.64,-13.07,-20.9,-27.08,-21.53,-17.68,-15.03,-20.1,-20.21,-19.18,-21.8,-29.5,-21.96,-25.59,-27.89,-13.56,-21.13,-27.22,-27.6,-26,-18.2,-20.4,-25.25,-25.31,-19.89,-13.09,-18.6,-24.81,-30.3,-21.5,-22,-12.01,-22.43,-27.64,-26.02,-10.97,-15.86,-20.74,-32.6,-21.07,-24.57,-20.1,-17.85,-17.82,-19.5,-17.98,-21.11,-20.94,-17.88,-28.05,-21.98,-17.56,-23.07,-17.82,-21.91,-19.7,-23.73,-12,-17.98,-17.47,-22.5,-26.4,-20.56,-17.74,-12.26,-14.65,-15.94,-17.95,-28.15,-19.52,-23.12,-15.18,-20.65,-17.1,-30.72,-23.28,-14.28,-20.45,-17.94,-21.6,-24.19,-18.21,-13.84,-20.91,-26,-23.7,-16.14,-19.15],[187.15,182.5,182.8,180.57,181.59,187.2,179.62,179.97,183.41,180.94,166.1,184.3,181.2,166.87,181.9,183.44,170.52,181.36,167.32,184.4,181.9,169.33,183.2,182.31,179.62,180.02,182.92,166.49,185.32,182.28,182.4,182.12,181.6,186.1,179.86,180.15,174.46,169.28,184.28,180,180.8,170.5,185.5,166.66,184.48,182.22,181.2,166.26,166.85,181.53,180.9,181.13,178.4,186.3,181.44,181.83,186.9,181.51,181.5,181.26,180.58,182.39,179.6,181.23,184.03,181.49,181.28,186.2,179.99,166.2,181.61,180.96,170.4,181.7,182.04,186.78,167,166.97,184.95,181.5,183.4,168.98,184.42,167.23,181.32,185.9,180.1,184.61,170.34,181.85,181.51,169.9,180.38,180.87,170.62,181.57,178.43,179.6,187.32,169.5],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"ctKey":["985","718","919","470","966","516","823","838","98","903","7","183","299","504","466","957","908","307","456","146","793","258","435","324","68","510","948","560","288","341","347","167","377","784","628","450","605","301","670","158","733","87","607","865","223","925","732","251","543","694","425","489","297","502","920","171","519","703","449","393","660","910","363","846","600","387","878","420","371","883","923","430","254","47","439","708","12","121","16","406","643","133","556","853","156","757","281","554","655","185","298","844","421","666","490","871","792","396","137","250"],"ctGroup":"SharedData6a364abe"}]}],"limits":{"lat":[-33.09,-10.97],"lng":[166.1,187.32]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="col-xs-6">
<div id="htmlwidget-c8991a9ead469426e8db" style="width:100%;height:300px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-c8991a9ead469426e8db">{"x":{"data":{"x":[60,133,133,168,595,50,587,510,306,47,82,161,175,132,556,63,129,515,136,186,576,254,325,129,627,485,87,83,123,65,61,205,553,74,491,467,546,654,255,452,275,117,52,99,65,162,361,180,85,598,57,594,562,63,589,640,58,586,538,556,622,117,583,580,89,573,548,47,527,94,598,546,106,329,499,104,249,82,306,593,57,63,104,71,597,127,413,76,642,534,601,43,484,631,638,530,644,646,42,150],"y":[4.5,4.2,4,4.7,4.1,4.7,4.1,4.8,5.2,4.9,4.8,4.4,4,4.4,4.4,4.7,5.2,4.1,4.6,4.2,4.1,4.7,4.4,4.4,5,4.9,5.5,4.5,4.7,4.2,4.6,5.6,4.4,4.3,4.2,4.5,5.7,4.4,4.4,4.3,4,4.7,4.4,4.8,4.9,5.1,4.7,4.7,4.5,4.5,4.7,4.9,5.6,4.6,5.6,4.3,4.4,5.2,5.5,4.4,4.2,5.1,5.4,4.1,4.7,4.2,4.5,4.8,5.1,5,4.3,4.2,4.9,4.5,4.5,5.1,4.6,4.8,4.3,4.3,5,4.5,4.2,5.2,4.7,5.4,4.4,4.7,4.7,4.1,4,5.2,4.3,5.2,4.6,4.2,4.9,4.2,5.1,4.2],"key":["985","718","919","470","966","516","823","838","98","903","7","183","299","504","466","957","908","307","456","146","793","258","435","324","68","510","948","560","288","341","347","167","377","784","628","450","605","301","670","158","733","87","607","865","223","925","732","251","543","694","425","489","297","502","920","171","519","703","449","393","660","910","363","846","600","387","878","420","371","883","923","430","254","47","439","708","12","121","16","406","643","133","556","853","156","757","281","554","655","185","298","844","421","666","490","871","792","396","137","250"]},"color_spec":{"type":"constant","value":"#333333"},"color":null,"x_label":"depth","y_label":"mag","x_lim":null,"y_lim":null,"group":"SharedData6a364abe"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
<div id="filters" class="section level2">
<h2>Filters</h2>
<p>The examples so far have used linked brushing. Crosstalk also
supports using <em>filter inputs</em> to narrow down data sets. If
you’re familiar with input controls in Shiny, Crosstalk filter inputs
feel similar, but they don’t require Shiny so they work in static HTML
documents.</p>
<p>In the following example, we’ll use three filter inputs to control
two plots. (Note that linked brushing still works on the plots.)</p>
<pre class="r"><code>shared_mtcars &lt;- SharedData$new(mtcars)
bscols(widths = c(3,NA,NA),
  list(
    filter_checkbox(&quot;cyl&quot;, &quot;Cylinders&quot;, shared_mtcars, ~cyl, inline = TRUE),
    filter_slider(&quot;hp&quot;, &quot;Horsepower&quot;, shared_mtcars, ~hp, width = &quot;100%&quot;),
    filter_select(&quot;auto&quot;, &quot;Automatic&quot;, shared_mtcars, ~ifelse(am == 0, &quot;Yes&quot;, &quot;No&quot;))
  ),
  d3scatter(shared_mtcars, ~wt, ~mpg, ~factor(cyl), width=&quot;100%&quot;, height=250),
  d3scatter(shared_mtcars, ~hp, ~qsec, ~factor(cyl), width=&quot;100%&quot;, height=250)
)</code></pre>
<div class="container-fluid crosstalk-bscols">
<div class="row">
<div class="col-xs-3">
<div id="cyl" class="form-group crosstalk-input-checkboxgroup crosstalk-input">
<label class="control-label" for="cyl">Cylinders</label>
<div class="crosstalk-options-group">
<label class="checkbox-inline">
<input type="checkbox" name="cyl" value="4"/>
<span>4</span>
</label>
<label class="checkbox-inline">
<input type="checkbox" name="cyl" value="6"/>
<span>6</span>
</label>
<label class="checkbox-inline">
<input type="checkbox" name="cyl" value="8"/>
<span>8</span>
</label>
</div>
<script type="application/json" data-for="cyl">{
  "map": {
    "4": ["Datsun 710", "Merc 240D", "Merc 230", "Fiat 128", "Honda Civic", "Toyota Corolla", "Toyota Corona", "Fiat X1-9", "Porsche 914-2", "Lotus Europa", "Volvo 142E"],
    "6": ["Mazda RX4", "Mazda RX4 Wag", "Hornet 4 Drive", "Valiant", "Merc 280", "Merc 280C", "Ferrari Dino"],
    "8": ["Hornet Sportabout", "Duster 360", "Merc 450SE", "Merc 450SL", "Merc 450SLC", "Cadillac Fleetwood", "Lincoln Continental", "Chrysler Imperial", "Dodge Challenger", "AMC Javelin", "Camaro Z28", "Pontiac Firebird", "Ford Pantera L", "Maserati Bora"]
  },
  "group": ["SharedData223919e8"]
}</script>
</div>
<div class="form-group crosstalk-input crosstalk-input-slider js-range-slider" id="hp" style="width: 100%;">
<label class="control-label" for="hp">Horsepower</label>
<input data-skin="shiny" data-type="double" data-min="52" data-max="335" data-from="52" data-to="335" data-step="1" data-grid="true" data-grid-num="9.75862068965517" data-grid-snap="false" data-prettify-separator="," data-keyboard="true" data-keyboard-step="0.353356890459364" data-drag-interval="true" data-data-type="number"/>
<script type="application/json" data-for="hp">{
  "values": [52, 62, 65, 66, 66, 91, 93, 95, 97, 105, 109, 110, 110, 110, 113, 123, 123, 150, 150, 175, 175, 175, 180, 180, 180, 205, 215, 230, 245, 245, 264, 335],
  "keys": ["Honda Civic", "Merc 240D", "Toyota Corolla", "Fiat 128", "Fiat X1-9", "Porsche 914-2", "Datsun 710", "Merc 230", "Toyota Corona", "Valiant", "Volvo 142E", "Mazda RX4", "Mazda RX4 Wag", "Hornet 4 Drive", "Lotus Europa", "Merc 280", "Merc 280C", "Dodge Challenger", "AMC Javelin", "Hornet Sportabout", "Pontiac Firebird", "Ferrari Dino", "Merc 450SE", "Merc 450SL", "Merc 450SLC", "Cadillac Fleetwood", "Lincoln Continental", "Chrysler Imperial", "Duster 360", "Camaro Z28", "Ford Pantera L", "Maserati Bora"],
  "group": ["SharedData223919e8"]
}</script>
</div>
<div id="auto" class="form-group crosstalk-input-select crosstalk-input">
<label class="control-label" for="auto">Automatic</label>
<div>
<select multiple></select>
<script type="application/json" data-for="auto">{
  "items": {
    "value": ["No", "Yes"],
    "label": ["No", "Yes"]
  },
  "map": {
    "No": ["Mazda RX4", "Mazda RX4 Wag", "Datsun 710", "Fiat 128", "Honda Civic", "Toyota Corolla", "Fiat X1-9", "Porsche 914-2", "Lotus Europa", "Ford Pantera L", "Ferrari Dino", "Maserati Bora", "Volvo 142E"],
    "Yes": ["Hornet 4 Drive", "Hornet Sportabout", "Valiant", "Duster 360", "Merc 240D", "Merc 230", "Merc 280", "Merc 280C", "Merc 450SE", "Merc 450SL", "Merc 450SLC", "Cadillac Fleetwood", "Lincoln Continental", "Chrysler Imperial", "Toyota Corona", "Dodge Challenger", "AMC Javelin", "Camaro Z28", "Pontiac Firebird"]
  },
  "group": ["SharedData223919e8"]
}</script>
</div>
</div>
</div>
<div class="col-xs-4">
<div id="htmlwidget-c00f518789c4d69dd1e0" style="width:100%;height:250px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-c00f518789c4d69dd1e0">{"x":{"data":{"x":[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78],"y":[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],"key":["Mazda RX4","Mazda RX4 Wag","Datsun 710","Hornet 4 Drive","Hornet Sportabout","Valiant","Duster 360","Merc 240D","Merc 230","Merc 280","Merc 280C","Merc 450SE","Merc 450SL","Merc 450SLC","Cadillac Fleetwood","Lincoln Continental","Chrysler Imperial","Fiat 128","Honda Civic","Toyota Corolla","Toyota Corona","Dodge Challenger","AMC Javelin","Camaro Z28","Pontiac Firebird","Fiat X1-9","Porsche 914-2","Lotus Europa","Ford Pantera L","Ferrari Dino","Maserati Bora","Volvo 142E"],"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"]},"color_spec":{"type":"ordinal","values":["4","6","8"]},"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"],"x_label":"wt","y_label":"mpg","x_lim":null,"y_lim":null,"group":"SharedData223919e8"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="col-xs-4">
<div id="htmlwidget-c6c9b0e3818aed2e7100" style="width:100%;height:250px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-c6c9b0e3818aed2e7100">{"x":{"data":{"x":[110,110,93,110,175,105,245,62,95,123,123,180,180,180,205,215,230,66,52,65,97,150,150,245,175,66,91,113,264,175,335,109],"y":[16.46,17.02,18.61,19.44,17.02,20.22,15.84,20,22.9,18.3,18.9,17.4,17.6,18,17.98,17.82,17.42,19.47,18.52,19.9,20.01,16.87,17.3,15.41,17.05,18.9,16.7,16.9,14.5,15.5,14.6,18.6],"key":["Mazda RX4","Mazda RX4 Wag","Datsun 710","Hornet 4 Drive","Hornet Sportabout","Valiant","Duster 360","Merc 240D","Merc 230","Merc 280","Merc 280C","Merc 450SE","Merc 450SL","Merc 450SLC","Cadillac Fleetwood","Lincoln Continental","Chrysler Imperial","Fiat 128","Honda Civic","Toyota Corolla","Toyota Corona","Dodge Challenger","AMC Javelin","Camaro Z28","Pontiac Firebird","Fiat X1-9","Porsche 914-2","Lotus Europa","Ford Pantera L","Ferrari Dino","Maserati Bora","Volvo 142E"],"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"]},"color_spec":{"type":"ordinal","values":["4","6","8"]},"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"],"x_label":"hp","y_label":"qsec","x_lim":null,"y_lim":null,"group":"SharedData223919e8"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<p>These three <code>filter_</code> functions are part of the Crosstalk
package, but third-party filter inputs could certainly be written and
shipped in other R packages.</p>
<p>While linked brushing only lets you have an active selection on one
widget at a time, you can have multiple active filters and Crosstalk
will combine the filters by intersection. In other words, only data
points that pass <em>all</em> active filters will be displayed in any of
the visualizations.</p>
</div>
<div id="keys" class="section level2">
<h2>Keys</h2>
<p>The <code>SharedData</code> constructor has two optional parameters.
The first is <code>key</code>, which is one of the central concepts of
Crosstalk. This concept is important because Crosstalk widgets
communicate with each other using arrays of keys; this is how both
selection and filter state are represented.</p>
<p>A key is a unique ID string by which a row can be identified. If
you’ve used SQL databases, you can think of these as primary keys,
except that their type must be character vector (whereas databases more
often use integer values as keys). And indeed, the same criteria that
make for good primary keys in SQL databases also make for good Crosstalk
keys:</p>
<ul>
<li>Unchanging over the life of the data</li>
<li>Relatively short</li>
<li>Must never be <code>NA</code> or <code>NULL</code> or
<code>""</code></li>
<li>Must be unique within the dataset</li>
</ul>
<p>Keys should also be data that’s safe to share publicly, as they may
end up being embedded in web page HTML (e.g., not social security
numbers).</p>
<p>If an explicit <code>key</code> argument isn’t passed to
<code>SharedData</code>, then <code>row.names()</code> are used if
available; if not, then row numbers are used. While row numbers are not
ideal because reordering or filtering the data will cause them to
change, they are sufficient for simple cases where you are not using
Shiny and are not doing anything special with groups (see the next
section).</p>
<p>The <code>key</code> argument can take several forms:</p>
<ol style="list-style-type: decimal">
<li>One-sided formula, e.g. <code>~ColumnName</code>. Will be evaluated
in the context of the data.</li>
<li>Character vector. Will be used directly. It must be the same length
as the data. (This should not be used if the data is <a
href="shiny.html">reactive</a> and may vary in length.)</li>
<li>Function with a single parameter. This will be invoked as necessary
with the data frame as the argument; the return value should be a
character vector of length <code>nrow(data)</code>.</li>
</ol>
<p>The following code snippet demonstrates all three styles, with
identical results:</p>
<pre class="r"><code>state_info &lt;- data.frame(stringsAsFactors = FALSE,
  state.name,
  state.region,
  state.area
)
sd1 &lt;- SharedData$new(state_info, ~state.name)
sd2 &lt;- SharedData$new(state_info, state_info$state.name)
sd3 &lt;- SharedData$new(state_info, function(data) data$state.name)

# Do all three forms give the same results?
all(sd1$key() == sd2$key() &amp; sd2$key() == sd3$key())</code></pre>
<pre><code>[1] TRUE</code></pre>
</div>
<div id="grouping" class="section level2">
<h2>Grouping</h2>
<p>So far we’ve generated three sets of Crosstalk plots (based on
<code>iris</code>, <code>quakes</code>, and <code>mtcars</code>). Each
of these sets forms a “group”, or a set of Crosstalk plots/widgets that
only communicate with each other. Selecting points on one of the
<code>iris</code> plots doesn’t affect the plots in the
<code>quakes</code> group, and vice versa.</p>
<p>Every <code>SharedData</code> instance belongs to a group. If you
don’t specify a group when creating a <code>SharedData</code> instance,
a randomly generated name is used:</p>
<pre class="r"><code>shared_iris$groupName()</code></pre>
<pre><code>[1] &quot;SharedDatac9f6656f&quot;</code></pre>
<p>In other words, every <code>SharedData</code> forms its own group, by
default.</p>
<p>You can provide a <code>group</code> argument to the
<code>SharedData</code> constructor to assign it to a specific group.
<strong>It’s critical that all <code>SharedData</code> instances in a
group refer conceptually to the same data points, and share the same
keys.</strong> This doesn’t mean that the data and keys need to be
identical across <code>SharedData</code> instances in the group, but
rather, that any overlapping key values must refer to the same data
point or observation; and conversely, that related data
points/observations in different <code>SharedData</code> instances must
use identical keys.</p>
<p>This might be useful in cases, for example, where data is subsetted.
The following code plots <code>mtcars</code> in its entirety, and also
displays two smaller plots that subset to automatic and manual
transmissions. Even though there are three distinct
<code>SharedData</code> objects, the plots are linked because the group
names are identical.</p>
<pre class="r"><code>row.names(mtcars) &lt;- NULL
sd_mtcars_all &lt;- SharedData$new(mtcars, group = &quot;mtcars_subset&quot;)
sd_mtcars_auto &lt;- SharedData$new(mtcars[mtcars$am == 0,], group = &quot;mtcars_subset&quot;)
sd_mtcars_manual &lt;- SharedData$new(mtcars[mtcars$am == 1,], group = &quot;mtcars_subset&quot;)

bscols(widths = c(8, 4),
  d3scatter(sd_mtcars_all, ~hp, ~mpg, ~factor(cyl),
    x_lim = ~range(hp), y_lim = ~range(mpg),
    width = &quot;100%&quot;, height = 400),
  list(
    d3scatter(sd_mtcars_auto, ~hp, ~mpg, ~factor(cyl),
      x_lim = range(mtcars$hp), y_lim = range(mtcars$mpg),
      width = &quot;100%&quot;, height = 200),
    d3scatter(sd_mtcars_manual, ~hp, ~mpg, ~factor(cyl),
      x_lim = range(mtcars$hp), y_lim = range(mtcars$mpg),
      width = &quot;100%&quot;, height = 200)
  )
)</code></pre>
<div class="container-fluid crosstalk-bscols">
<div class="row">
<div class="col-xs-8">
<div id="htmlwidget-c91fc87c780c3d8a63b9" style="width:100%;height:400px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-c91fc87c780c3d8a63b9">{"x":{"data":{"x":[110,110,93,110,175,105,245,62,95,123,123,180,180,180,205,215,230,66,52,65,97,150,150,245,175,66,91,113,264,175,335,109],"y":[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],"key":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"]},"color_spec":{"type":"ordinal","values":["4","6","8"]},"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"],"x_label":"hp","y_label":"mpg","x_lim":[52,335],"y_lim":[10.4,33.9],"group":"mtcars_subset"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="col-xs-4">
<div id="htmlwidget-8df9a9933fce0e13b17f" style="width:100%;height:200px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-8df9a9933fce0e13b17f">{"x":{"data":{"x":[110,175,105,245,62,95,123,123,180,180,180,205,215,230,97,150,150,245,175],"y":[21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,21.5,15.5,15.2,13.3,19.2],"key":["4","5","6","7","8","9","10","11","12","13","14","15","16","17","21","22","23","24","25"],"color":["6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","8","8","8","8"]},"color_spec":{"type":"ordinal","values":["4","6","8"]},"color":["6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","8","8","8","8"],"x_label":"hp","y_label":"mpg","x_lim":[52,335],"y_lim":[10.4,33.9],"group":"mtcars_subset"},"evals":[],"jsHooks":[]}</script>
<div id="htmlwidget-ec2eb6917d65d834530a" style="width:100%;height:200px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-ec2eb6917d65d834530a">{"x":{"data":{"x":[110,110,93,66,52,65,66,91,113,264,175,335,109],"y":[21,21,22.8,32.4,30.4,33.9,27.3,26,30.4,15.8,19.7,15,21.4],"key":["1","2","3","18","19","20","26","27","28","29","30","31","32"],"color":["6","6","4","4","4","4","4","4","4","8","6","8","4"]},"color_spec":{"type":"ordinal","values":["4","6","8"]},"color":["6","6","4","4","4","4","4","4","4","8","6","8","4"],"x_label":"hp","y_label":"mpg","x_lim":[52,335],"y_lim":[10.4,33.9],"group":"mtcars_subset"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<p>Note that this example only works because the <code>mtcars</code>
data frame has row names.</p>
</div>

<footer>
  <div>&nbsp;</div>
  <div>&nbsp;</div>
  <div class="text-muted">
  Copyright &copy; 2016 RStudio, Inc.
  </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
