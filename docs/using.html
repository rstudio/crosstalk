<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Using Crosstalk</title>

<script src="site_libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.0/htmlwidgets.js"></script>
<script src="site_libs/d3-3.5.9/d3.min.js"></script>
<link href="site_libs/d3scatter-0.0.0/d3scatter.css" rel="stylesheet" />
<script src="site_libs/d3scatter-0.0.0/d3scatter.js"></script>
<script src="site_libs/d3scatter-binding-0.1.0/d3scatter.js"></script>
<link href="site_libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="site_libs/leaflet-0.7.7/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-0.7.7/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<link href="site_libs/leaflet-label-0.2.2/leaflet.label.css" rel="stylesheet" />
<script src="site_libs/leaflet-label-0.2.2/leaflet.label.js"></script>
<script src="site_libs/Proj4Leaflet-0.7.2/proj4-compressed.js"></script>
<script src="site_libs/Proj4Leaflet-0.7.2/proj4leaflet.js"></script>
<script src="site_libs/leaflet-binding-1.1.0.9000/leaflet.js"></script>
<link href="site_libs/leaflet-easybutton-1.3.1/easy-button.css" rel="stylesheet" />
<script src="site_libs/leaflet-easybutton-1.3.1/easy-button.js"></script>
<script src="site_libs/leaflet-easybutton-1.3.1/EasyButton-binding.js"></script>
<link href="site_libs/leaflet-locationfilter2-0.1.0/locationfilter.css" rel="stylesheet" />
<script src="site_libs/leaflet-locationfilter2-0.1.0/locationfilter.js"></script>
<script src="site_libs/leaflet-locationfilter2-0.1.0/locationfilter-bindings.js"></script>
<link href="site_libs/ionicons-2.0.1/ionicons.min.css" rel="stylesheet" />
<link href="site_libs/ionrangeslider-2.1.2/css/ion.rangeSlider.css" rel="stylesheet" />
<link href="site_libs/ionrangeslider-2.1.2/css/ion.rangeSlider.skinShiny.css" rel="stylesheet" />
<script src="site_libs/ionrangeslider-2.1.2/js/ion.rangeSlider.min.js"></script>
<script src="site_libs/strftime-0.9.2/strftime-min.js"></script>
<link href="site_libs/selectize-0.11.2/css/selectize.bootstrap3.css" rel="stylesheet" />
<script src="site_libs/selectize-0.11.2/js/selectize.min.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Crosstalk</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="using.html">Using Crosstalk</a>
</li>
<li>
  <a href="authoring.html">Authoring widgets</a>
</li>
<li>
  <a href="shiny.html">Shiny</a>
</li>
<li>
  <a href="widgets.html">Compatible widgets</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Reference (JS)
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="filter.html">FilterHandle</a>
    </li>
    <li>
      <a href="selection.html">SelectionHandle</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/crosstalk">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Using Crosstalk</h1>

</div>


<p>Crosstalk makes it easy to link multiple (Crosstalk-compatible) <a href="http://htmlwidgets.org">HTML widgets</a> within an R Markdown page or Shiny app. To begin, you’ll need to install the <code>crosstalk</code> package:</p>
<pre class="r"><code>devtools::install_github(&quot;rstudio/crosstalk&quot;)</code></pre>
<p>Note that at the time of this writing, only a few HTML Widgets are Crosstalk-compatible. This article will use a simple d3 scatter plot widget package called <a href="https://github.com/jcheng5/d3scatter"><code>d3scatter</code></a>, and the development version of the <a href="https://rstudio.github.io/leaflet">Leaflet</a> package.</p>
<pre class="r"><code>devtools::install_github(&quot;jcheng5/d3scatter&quot;)
devtools::install_github(&quot;rstudio/leaflet&quot;)</code></pre>
<p>Crosstalk is designed to work with widgets that take data frames (or sufficiently data-frame-like objects) as input. d3scatter, for example, takes a data frame:</p>
<pre class="r"><code>library(d3scatter)

d3scatter(iris, ~Petal.Length, ~Petal.Width, ~Species)</code></pre>
<div id="htmlwidget-5a07fef58d1a3cdcbc7f" style="width:480px;height:264px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-5a07fef58d1a3cdcbc7f">{"x":{"data":{"x":[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5,1.5,1.6,1.4,1.1,1.2,1.5,1.3,1.4,1.7,1.5,1.7,1.5,1,1.7,1.9,1.6,1.6,1.5,1.4,1.6,1.6,1.5,1.5,1.4,1.5,1.2,1.3,1.4,1.3,1.5,1.3,1.3,1.3,1.6,1.9,1.4,1.6,1.4,1.5,1.4,4.7,4.5,4.9,4,4.6,4.5,4.7,3.3,4.6,3.9,3.5,4.2,4,4.7,3.6,4.4,4.5,4.1,4.5,3.9,4.8,4,4.9,4.7,4.3,4.4,4.8,5,4.5,3.5,3.8,3.7,3.9,5.1,4.5,4.5,4.7,4.4,4.1,4,4.4,4.6,4,3.3,4.2,4.2,4.2,4.3,3,4.1,6,5.1,5.9,5.6,5.8,6.6,4.5,6.3,5.8,6.1,5.1,5.3,5.5,5,5.1,5.3,5.5,6.7,6.9,5,5.7,4.9,6.7,4.9,5.7,6,4.8,4.9,5.6,5.8,6.1,6.4,5.6,5.1,5.6,6.1,5.6,5.5,4.8,5.4,5.6,5.1,5.1,5.9,5.7,5.2,5,5.2,5.4,5.1],"y":[0.2,0.2,0.2,0.2,0.2,0.4,0.3,0.2,0.2,0.1,0.2,0.2,0.1,0.1,0.2,0.4,0.4,0.3,0.3,0.3,0.2,0.4,0.2,0.5,0.2,0.2,0.4,0.2,0.2,0.2,0.2,0.4,0.1,0.2,0.2,0.2,0.2,0.1,0.2,0.2,0.3,0.3,0.2,0.6,0.4,0.3,0.2,0.2,0.2,0.2,1.4,1.5,1.5,1.3,1.5,1.3,1.6,1,1.3,1.4,1,1.5,1,1.4,1.3,1.4,1.5,1,1.5,1.1,1.8,1.3,1.5,1.2,1.3,1.4,1.4,1.7,1.5,1,1.1,1,1.2,1.6,1.5,1.6,1.5,1.3,1.3,1.3,1.2,1.4,1.2,1,1.3,1.2,1.3,1.3,1.1,1.3,2.5,1.9,2.1,1.8,2.2,2.1,1.7,1.8,1.8,2.5,2,1.9,2.1,2,2.4,2.3,1.8,2.2,2.3,1.5,2.3,2,2,1.8,2.1,1.8,1.8,1.8,2.1,1.6,1.9,2,2.2,1.5,1.4,2.3,2.4,1.8,1.8,2.1,2.4,2.3,1.9,2.3,2.5,2.3,1.9,2,2.3,1.8],"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"]},"color_spec":{"type":"ordinal","values":["setosa","versicolor","virginica"]},"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"],"x_label":"Petal.Length","y_label":"Petal.Width","x_lim":null,"y_lim":null,"group":null},"evals":[],"jsHooks":[]}</script>
<p>Crosstalk’s main R API is a <code>SharedData</code> R6 class. You use this class to wrap your data frame, and pass it to a Crosstalk-compatible widget where a data frame would normally be expected.</p>
<pre class="r"><code>library(crosstalk)

shared_iris &lt;- SharedData$new(iris)
d3scatter(shared_iris, ~Petal.Length, ~Petal.Width, ~Species)</code></pre>
<p>(It’s not even worth showing the results–it looks just the same as the plot above.)</p>
<div id="linked-brushing" class="section level2">
<h2>Linked brushing</h2>
<p>Things become more interesting when we pass the same <code>SharedData</code> instance to two separate widgets: their selection state becomes linked. (<code>bscols</code> is a simple helper function for creating <a href="https://getbootstrap.com/">Bootstrap</a> column layouts, used here to put two plots side by side.)</p>
<pre class="r"><code>library(crosstalk)

shared_iris &lt;- SharedData$new(iris)
bscols(
  d3scatter(shared_iris, ~Petal.Length, ~Petal.Width, ~Species, width=&quot;100%&quot;, height=300),
  d3scatter(shared_iris, ~Sepal.Length, ~Sepal.Width, ~Species, width=&quot;100%&quot;, height=300)
)</code></pre>
<div class="container-fluid crosstalk-bscols">
<div class="fluid-row">
<div class="col-xs-6">
<div id="htmlwidget-9404780a76a1ac1624e8" style="width:100%;height:300px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-9404780a76a1ac1624e8">{"x":{"data":{"x":[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5,1.5,1.6,1.4,1.1,1.2,1.5,1.3,1.4,1.7,1.5,1.7,1.5,1,1.7,1.9,1.6,1.6,1.5,1.4,1.6,1.6,1.5,1.5,1.4,1.5,1.2,1.3,1.4,1.3,1.5,1.3,1.3,1.3,1.6,1.9,1.4,1.6,1.4,1.5,1.4,4.7,4.5,4.9,4,4.6,4.5,4.7,3.3,4.6,3.9,3.5,4.2,4,4.7,3.6,4.4,4.5,4.1,4.5,3.9,4.8,4,4.9,4.7,4.3,4.4,4.8,5,4.5,3.5,3.8,3.7,3.9,5.1,4.5,4.5,4.7,4.4,4.1,4,4.4,4.6,4,3.3,4.2,4.2,4.2,4.3,3,4.1,6,5.1,5.9,5.6,5.8,6.6,4.5,6.3,5.8,6.1,5.1,5.3,5.5,5,5.1,5.3,5.5,6.7,6.9,5,5.7,4.9,6.7,4.9,5.7,6,4.8,4.9,5.6,5.8,6.1,6.4,5.6,5.1,5.6,6.1,5.6,5.5,4.8,5.4,5.6,5.1,5.1,5.9,5.7,5.2,5,5.2,5.4,5.1],"y":[0.2,0.2,0.2,0.2,0.2,0.4,0.3,0.2,0.2,0.1,0.2,0.2,0.1,0.1,0.2,0.4,0.4,0.3,0.3,0.3,0.2,0.4,0.2,0.5,0.2,0.2,0.4,0.2,0.2,0.2,0.2,0.4,0.1,0.2,0.2,0.2,0.2,0.1,0.2,0.2,0.3,0.3,0.2,0.6,0.4,0.3,0.2,0.2,0.2,0.2,1.4,1.5,1.5,1.3,1.5,1.3,1.6,1,1.3,1.4,1,1.5,1,1.4,1.3,1.4,1.5,1,1.5,1.1,1.8,1.3,1.5,1.2,1.3,1.4,1.4,1.7,1.5,1,1.1,1,1.2,1.6,1.5,1.6,1.5,1.3,1.3,1.3,1.2,1.4,1.2,1,1.3,1.2,1.3,1.3,1.1,1.3,2.5,1.9,2.1,1.8,2.2,2.1,1.7,1.8,1.8,2.5,2,1.9,2.1,2,2.4,2.3,1.8,2.2,2.3,1.5,2.3,2,2,1.8,2.1,1.8,1.8,1.8,2.1,1.6,1.9,2,2.2,1.5,1.4,2.3,2.4,1.8,1.8,2.1,2.4,2.3,1.9,2.3,2.5,2.3,1.9,2,2.3,1.8],"key":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150"],"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"]},"color_spec":{"type":"ordinal","values":["setosa","versicolor","virginica"]},"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"],"x_label":"Petal.Length","y_label":"Petal.Width","x_lim":null,"y_lim":null,"group":"SharedData4e418d0e"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="col-xs-6">
<div id="htmlwidget-1fbaf30b053281ed232b" style="width:100%;height:300px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-1fbaf30b053281ed232b">{"x":{"data":{"x":[5.1,4.9,4.7,4.6,5,5.4,4.6,5,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5,5,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5,5.5,4.9,4.4,5.1,5,4.5,4.4,5,5.1,4.8,5.1,4.6,5.3,5,7,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5,5.9,6,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6,5.7,5.5,5.5,5.8,6,5.4,6,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"y":[3.5,3,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3,3,4,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3,3.4,3.5,2.3,3.2,3.5,3.8,3,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2,3,2.2,2.9,2.9,3.1,3,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3,2.8,3,2.9,2.6,2.4,2.4,2.7,2.7,3,3.4,3.1,2.3,3,2.5,2.6,3,2.6,2.3,2.7,3,2.9,2.9,2.5,2.8,3.3,2.7,3,2.9,3,3,2.5,2.9,2.5,3.6,3.2,2.7,3,2.5,2.8,3.2,3,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3,2.8,3,2.8,3.8,2.8,2.8,2.6,3,3.4,3.1,3,3.1,3.1,3.1,2.7,3.2,3.3,3,2.5,3,3.4,3],"key":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150"],"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"]},"color_spec":{"type":"ordinal","values":["setosa","versicolor","virginica"]},"color":["setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","setosa","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","versicolor","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica","virginica"],"x_label":"Sepal.Length","y_label":"Sepal.Width","x_lim":null,"y_lim":null,"group":"SharedData4e418d0e"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<p>Click and drag to brush data points in the above plots; noticed that their brushing states are linked. This is because they share the same <code>SharedData</code> object. If you created a separated <code>SharedData</code> object for each plot, even with the same underlying data frame, the plots would not be linked.</p>
<p>Note that we’re not limited to linking only two plots, nor do we need to limit ourselves to the same type of widget. Any Crosstalk-compatible widget can be linked with any other.</p>
<pre class="r"><code>library(leaflet)

shared_quakes &lt;- SharedData$new(quakes[sample(nrow(quakes), 100),])
bscols(
  leaflet(shared_quakes, width = &quot;100%&quot;, height = 300) %&gt;%
    addTiles() %&gt;%
    addMarkers(),
  d3scatter(shared_quakes, ~depth, ~mag, width = &quot;100%&quot;, height = 300)
)</code></pre>
<div class="container-fluid crosstalk-bscols">
<div class="fluid-row">
<div class="col-xs-6">
<div id="htmlwidget-9bd0d7c904b2d0917a29" style="width:100%;height:300px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-9bd0d7c904b2d0917a29">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addSelect","args":["SharedData92aff8b3"]},{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"maxNativeZoom":null,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"continuousWorld":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":null,"unloadInvisibleTiles":null,"updateWhenIdle":null,"detectRetina":false,"reuseTiles":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[-17.68,-32.42,-21.85,-23.44,-15.71,-18.89,-34.63,-18.94,-22,-21.04,-24.41,-19.19,-16.23,-17.46,-27.27,-20.54,-13.26,-14.3,-15.26,-14.57,-22.24,-19.89,-20.64,-21.4,-16.1,-19.76,-32.9,-20.18,-27.27,-14.86,-15.34,-20.77,-15.03,-24.5,-23.85,-17.93,-26.16,-19.7,-22.14,-31.8,-27.28,-18,-22.55,-25.63,-20.41,-25.31,-17.4,-15.85,-23.77,-20.9,-23.92,-20.08,-13.47,-18.13,-19.92,-17.72,-20.3,-30.09,-17.46,-19.51,-34.1,-27.18,-20.61,-32.7,-22.34,-20.48,-28.83,-23.3,-16.28,-32.14,-17.78,-15.9,-20.74,-18.35,-19.6,-17.7,-32.6,-23.28,-25.46,-17.44,-16.3,-15.79,-19.34,-23.73,-17.44,-10.78,-15.67,-18.56,-21.04,-23.61,-18.54,-12.37,-31.94,-26.11,-16.46,-28.22,-16.4,-12.01,-17.64,-26.1],[181.11,181.21,180.89,182.93,166.91,169.42,179.1,182.43,180.52,181.2,180.03,182.3,183.59,181.32,182.36,181.66,167.01,167.32,183.13,167.24,184.56,183.84,169.66,180.78,167.25,181.41,181.6,181.62,182.38,167.32,167.1,183.71,182.29,180.92,180.26,167.89,179.5,182.44,180.64,180.6,183.4,185.48,183.34,180.26,181.74,179.69,181.02,185.13,180.16,181.51,184.47,182.74,172.29,181.52,183.91,180.3,182.3,182.4,181.42,183.97,181.8,182.18,182.6,181.7,171.52,181.38,181.66,179.7,166.94,180,181.53,167.16,180.7,185.27,184.53,181.7,180.9,184.61,179.98,181.33,186,166.83,182.62,182.53,181.4,166.1,185.23,169.31,181.2,180.23,168.93,166.93,180.57,178.3,180.79,183.6,185.86,166.29,181.28,182.3],null,null,null,{"clickable":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,null,{"ctKey":["469","484","811","370","545","170","622","876","279","395","755","662","203","353","355","680","528","699","529","735","412","168","754","862","536","271","476","904","339","927","675","977","175","609","956","126","319","834","749","796","580","472","748","847","199","294","316","190","225","262","562","241","118","218","566","200","438","611","905","637","419","336","428","418","230","650","386","306","534","901","616","581","795","719","773","85","425","554","848","906","35","532","674","229","276","672","829","192","327","409","825","986","470","114","28","983","296","352","38","326"],"ctGroup":"SharedData92aff8b3"}]}],"limits":{"lat":[-34.63,-10.78],"lng":[166.1,186]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="col-xs-6">
<div id="htmlwidget-162906b5c2db6f6a95d3" style="width:100%;height:300px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-162906b5c2db6f6a95d3">{"x":{"data":{"x":[568,47,577,158,58,239,278,566,561,591,500,390,367,573,65,559,213,208,393,162,99,244,89,615,68,105,169,558,45,137,128,251,399,377,497,49,492,397,591,178,70,143,66,464,538,507,479,290,505,548,40,298,64,618,264,595,476,51,524,280,246,56,488,211,106,556,221,500,50,331,511,41,589,201,199,450,57,76,479,545,48,45,573,232,529,195,66,223,483,475,100,291,168,617,498,75,148,59,574,49],"y":[4.4,4.9,4.6,4.1,4.8,4.5,4.7,4.3,4.5,4.9,4.5,4.9,4.7,4.1,4.7,4.9,5.1,4.8,4.4,4.5,4.8,5.3,4.9,4.7,4.7,4.4,4.6,4.5,4.5,4.9,5.3,4.4,4.1,4.8,4.3,5.1,4.5,4,4.5,4.5,5.1,4.4,4.6,4.8,4.3,4.6,4.4,4.6,4.5,4.7,4.7,4.5,4.7,4.6,4.2,5.2,4.5,4.4,4.2,4,4.3,4.5,4.6,4.4,5,4.2,5.1,4.7,4.6,4.5,4.8,4.8,4.4,4.7,4.3,4,4.7,4.7,4.5,4.2,4.5,4.6,4.5,5,4.6,4.9,4.4,4.7,4.2,4.4,4.4,4.2,4.7,4.8,5.2,4.9,5,4.9,4.6,4.4],"key":["469","484","811","370","545","170","622","876","279","395","755","662","203","353","355","680","528","699","529","735","412","168","754","862","536","271","476","904","339","927","675","977","175","609","956","126","319","834","749","796","580","472","748","847","199","294","316","190","225","262","562","241","118","218","566","200","438","611","905","637","419","336","428","418","230","650","386","306","534","901","616","581","795","719","773","85","425","554","848","906","35","532","674","229","276","672","829","192","327","409","825","986","470","114","28","983","296","352","38","326"]},"color_spec":{"type":"constant","value":"#333333"},"color":null,"x_label":"depth","y_label":"mag","x_lim":null,"y_lim":null,"group":"SharedData92aff8b3"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
<div id="filters" class="section level2">
<h2>Filters</h2>
<p>The examples so far have used linked brushing. Crosstalk also supports using <em>filter inputs</em> to narrow down data sets. If you’re familiar with input controls in Shiny, Crosstalk filter inputs feel similar, but they don’t require Shiny so they work in static HTML documents.</p>
<p>In the following example, we’ll use three filter inputs to control two plots. (Note that linked brushing still works on the plots.)</p>
<pre class="r"><code>shared_mtcars &lt;- SharedData$new(mtcars)
bscols(widths = c(3,NA,NA),
  list(
    filter_checkbox(&quot;cyl&quot;, &quot;Cylinders&quot;, shared_mtcars, ~cyl, inline = TRUE),
    filter_slider(&quot;hp&quot;, &quot;Horsepower&quot;, shared_mtcars, ~hp, width = &quot;100%&quot;),
    filter_select(&quot;auto&quot;, &quot;Automatic&quot;, shared_mtcars, ~ifelse(am == 0, &quot;Yes&quot;, &quot;No&quot;))
  ),
  d3scatter(shared_mtcars, ~wt, ~mpg, ~factor(cyl), width=&quot;100%&quot;, height=250),
  d3scatter(shared_mtcars, ~hp, ~qsec, ~factor(cyl), width=&quot;100%&quot;, height=250)
)</code></pre>
<div class="container-fluid crosstalk-bscols">
<div class="fluid-row">
<div class="col-xs-3">
<div id="cyl" class="form-group crosstalk-input-checkboxgroup crosstalk-input">
<label class="control-label" for="cyl">Cylinders</label>
<div class="crosstalk-options-group">
<label class="checkbox-inline">
<input type="checkbox" name="cyl" value="4"/>
<span>4</span>
</label>
<label class="checkbox-inline">
<input type="checkbox" name="cyl" value="6"/>
<span>6</span>
</label>
<label class="checkbox-inline">
<input type="checkbox" name="cyl" value="8"/>
<span>8</span>
</label>
</div>
<script type="application/json" data-for="cyl">{
  "map": {
    "4": ["Datsun 710", "Merc 240D", "Merc 230", "Fiat 128", "Honda Civic", "Toyota Corolla", "Toyota Corona", "Fiat X1-9", "Porsche 914-2", "Lotus Europa", "Volvo 142E"],
    "6": ["Mazda RX4", "Mazda RX4 Wag", "Hornet 4 Drive", "Valiant", "Merc 280", "Merc 280C", "Ferrari Dino"],
    "8": ["Hornet Sportabout", "Duster 360", "Merc 450SE", "Merc 450SL", "Merc 450SLC", "Cadillac Fleetwood", "Lincoln Continental", "Chrysler Imperial", "Dodge Challenger", "AMC Javelin", "Camaro Z28", "Pontiac Firebird", "Ford Pantera L", "Maserati Bora"]
  },
  "group": ["SharedData0289d6ce"]
}</script>
</div>
<div class="form-group crosstalk-input crosstalk-input-slider js-range-slider" id="hp" style="width: 100%;">
<label class="control-label" for="hp">Horsepower</label>
<input data-type="double" data-min="52" data-max="335" data-from="52" data-to="335" data-step="1" data-grid="true" data-grid-num="9.75862068965517" data-grid-snap="false" data-prettify-separator="," data-keyboard="true" data-keyboard-step="0.353356890459364" data-drag-interval="true" data-data-type="number"/>
<script type="application/json" data-for="hp">{
  "values": [52, 62, 65, 66, 66, 91, 93, 95, 97, 105, 109, 110, 110, 110, 113, 123, 123, 150, 150, 175, 175, 175, 180, 180, 180, 205, 215, 230, 245, 245, 264, 335],
  "keys": ["Honda Civic", "Merc 240D", "Toyota Corolla", "Fiat 128", "Fiat X1-9", "Porsche 914-2", "Datsun 710", "Merc 230", "Toyota Corona", "Valiant", "Volvo 142E", "Mazda RX4", "Mazda RX4 Wag", "Hornet 4 Drive", "Lotus Europa", "Merc 280", "Merc 280C", "Dodge Challenger", "AMC Javelin", "Hornet Sportabout", "Pontiac Firebird", "Ferrari Dino", "Merc 450SE", "Merc 450SL", "Merc 450SLC", "Cadillac Fleetwood", "Lincoln Continental", "Chrysler Imperial", "Duster 360", "Camaro Z28", "Ford Pantera L", "Maserati Bora"],
  "group": ["SharedData0289d6ce"]
}</script>
</div>
<div id="auto" class="form-group crosstalk-input-select crosstalk-input">
<label class="control-label" for="auto">Automatic</label>
<div>
<select multiple></select>
<script type="application/json" data-for="auto">{
  "items": {
    "value": ["No", "Yes"],
    "label": ["No", "Yes"]
  },
  "map": {
    "No": ["Mazda RX4", "Mazda RX4 Wag", "Datsun 710", "Fiat 128", "Honda Civic", "Toyota Corolla", "Fiat X1-9", "Porsche 914-2", "Lotus Europa", "Ford Pantera L", "Ferrari Dino", "Maserati Bora", "Volvo 142E"],
    "Yes": ["Hornet 4 Drive", "Hornet Sportabout", "Valiant", "Duster 360", "Merc 240D", "Merc 230", "Merc 280", "Merc 280C", "Merc 450SE", "Merc 450SL", "Merc 450SLC", "Cadillac Fleetwood", "Lincoln Continental", "Chrysler Imperial", "Toyota Corona", "Dodge Challenger", "AMC Javelin", "Camaro Z28", "Pontiac Firebird"]
  },
  "group": ["SharedData0289d6ce"]
}</script>
</div>
</div>
</div>
<div class="col-xs-4">
<div id="htmlwidget-cb53f5a7759b49b7ecac" style="width:100%;height:250px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-cb53f5a7759b49b7ecac">{"x":{"data":{"x":[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78],"y":[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],"key":["Mazda RX4","Mazda RX4 Wag","Datsun 710","Hornet 4 Drive","Hornet Sportabout","Valiant","Duster 360","Merc 240D","Merc 230","Merc 280","Merc 280C","Merc 450SE","Merc 450SL","Merc 450SLC","Cadillac Fleetwood","Lincoln Continental","Chrysler Imperial","Fiat 128","Honda Civic","Toyota Corolla","Toyota Corona","Dodge Challenger","AMC Javelin","Camaro Z28","Pontiac Firebird","Fiat X1-9","Porsche 914-2","Lotus Europa","Ford Pantera L","Ferrari Dino","Maserati Bora","Volvo 142E"],"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"]},"color_spec":{"type":"ordinal","values":["4","6","8"]},"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"],"x_label":"wt","y_label":"mpg","x_lim":null,"y_lim":null,"group":"SharedData0289d6ce"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="col-xs-4">
<div id="htmlwidget-2f591f1b4cd6fe6f33f6" style="width:100%;height:250px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-2f591f1b4cd6fe6f33f6">{"x":{"data":{"x":[110,110,93,110,175,105,245,62,95,123,123,180,180,180,205,215,230,66,52,65,97,150,150,245,175,66,91,113,264,175,335,109],"y":[16.46,17.02,18.61,19.44,17.02,20.22,15.84,20,22.9,18.3,18.9,17.4,17.6,18,17.98,17.82,17.42,19.47,18.52,19.9,20.01,16.87,17.3,15.41,17.05,18.9,16.7,16.9,14.5,15.5,14.6,18.6],"key":["Mazda RX4","Mazda RX4 Wag","Datsun 710","Hornet 4 Drive","Hornet Sportabout","Valiant","Duster 360","Merc 240D","Merc 230","Merc 280","Merc 280C","Merc 450SE","Merc 450SL","Merc 450SLC","Cadillac Fleetwood","Lincoln Continental","Chrysler Imperial","Fiat 128","Honda Civic","Toyota Corolla","Toyota Corona","Dodge Challenger","AMC Javelin","Camaro Z28","Pontiac Firebird","Fiat X1-9","Porsche 914-2","Lotus Europa","Ford Pantera L","Ferrari Dino","Maserati Bora","Volvo 142E"],"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"]},"color_spec":{"type":"ordinal","values":["4","6","8"]},"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"],"x_label":"hp","y_label":"qsec","x_lim":null,"y_lim":null,"group":"SharedData0289d6ce"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<p>These three <code>filter_</code> functions are part of the Crosstalk package, but third-party filter inputs could certainly be written and shipped in other R packages.</p>
<p>While linked brushing only lets you have an active selection on one widget at a time, you can have multiple active filters and Crosstalk will combine the filters by intersection. In other words, only data points that pass <em>all</em> active filters will be displayed in any of the visualizations.</p>
</div>
<div id="keys" class="section level2">
<h2>Keys</h2>
<p>The <code>SharedData</code> constructor has two optional parameters. The first is <code>key</code>, which is one of the central concepts of Crosstalk. This concept is important because Crosstalk widgets communicate with each other using arrays of keys; this is how both selection and filter state are represented.</p>
<p>A key is a unique ID string by which a row can be identified. If you’ve used SQL databases, you can think of these as primary keys, except that their type must be character vector (whereas databases more often use integer values as keys). And indeed, the same criteria that make for good primary keys in SQL databases also make for good Crosstalk keys:</p>
<ul>
<li>Unchanging over the life of the data</li>
<li>Relatively short</li>
<li>Must never be <code>NA</code> or <code>NULL</code> or <code>&quot;&quot;</code></li>
<li>Must be unique within the dataset</li>
</ul>
<p>Keys should also be data that’s safe to share publicly, as they may end up being embedded in web page HTML (e.g., not social security numbers).</p>
<p>If an explicit <code>key</code> argument isn’t passed to <code>SharedData</code>, then <code>row.names()</code> are used if available; if not, then row numbers are used. While row numbers are not ideal because reordering or filtering the data will cause them to change, they are sufficient for simple cases where you are not using Shiny and are not doing anything special with groups (see the next section).</p>
<p>The <code>key</code> argument can take several forms:</p>
<ol style="list-style-type: decimal">
<li>One-sided formula, e.g. <code>~ColumnName</code>. Will be evaluated in the context of the data.</li>
<li>Character vector. Will be used directly. It must be the same length as the data. (This should not be used if the data is <a href="shiny.html">reactive</a> and may vary in length.)</li>
<li>Function with a single parameter. This will be invoked as necessary with the data frame as the argument; the return value should be a character vector of length <code>nrow(data)</code>.</li>
</ol>
<p>The following code snippet demonstrates all three styles, with identical results:</p>
<pre class="r"><code>state_info &lt;- data.frame(stringsAsFactors = FALSE,
  state.name,
  state.region,
  state.area
)
sd1 &lt;- SharedData$new(state_info, ~state.name)
sd2 &lt;- SharedData$new(state_info, state_info$state.name)
sd3 &lt;- SharedData$new(state_info, function(data) data$state.name)

# Do all three forms give the same results?
all(sd1$key() == sd2$key() &amp; sd2$key() == sd3$key())</code></pre>
<pre><code>[1] TRUE</code></pre>
</div>
<div id="grouping" class="section level2">
<h2>Grouping</h2>
<p>So far we’ve generated three sets of Crosstalk plots (based on <code>iris</code>, <code>quakes</code>, and <code>mtcars</code>). Each of these sets forms a “group”, or a set of Crosstalk plots/widgets that only communicate with each other. Selecting points on one of the <code>iris</code> plots doesn’t affect the plots in the <code>quakes</code> group, and vice versa.</p>
<p>Every <code>SharedData</code> instance belongs to a group. If you don’t specify a group when creating a <code>SharedData</code> instance, a randomly generated name is used:</p>
<pre class="r"><code>shared_iris$groupName()</code></pre>
<pre><code>[1] &quot;SharedData4e418d0e&quot;</code></pre>
<p>In other words, every <code>SharedData</code> forms its own group, by default.</p>
<p>You can provide a <code>group</code> argument to the <code>SharedData</code> constructor to assign it to a specific group. <strong>It’s critical that all <code>SharedData</code> instances in a group refer conceptually to the same data points, and share the same keys.</strong> This doesn’t mean that the data and keys need to be identical across <code>SharedData</code> instances in the group, but rather, that any overlapping key values must refer to the same data point or observation; and conversely, that related data points/observations in different <code>SharedData</code> instances must use identical keys.</p>
<p>This might be useful in cases, for example, where data is subsetted. The following code plots <code>mtcars</code> in its entirety, and also displays two smaller plots that subset to automatic and manual transmissions. Even though there are three distinct <code>SharedData</code> objects, the plots are linked because the group names are identical.</p>
<pre class="r"><code>row.names(mtcars) &lt;- NULL
sd_mtcars_all &lt;- SharedData$new(mtcars, group = &quot;mtcars_subset&quot;)
sd_mtcars_auto &lt;- SharedData$new(mtcars[mtcars$am == 0,], group = &quot;mtcars_subset&quot;)
sd_mtcars_manual &lt;- SharedData$new(mtcars[mtcars$am == 1,], group = &quot;mtcars_subset&quot;)

bscols(widths = c(8, 4),
  d3scatter(sd_mtcars_all, ~hp, ~mpg, ~factor(cyl),
    x_lim = ~range(hp), y_lim = ~range(mpg),
    width = &quot;100%&quot;, height = 400),
  list(
    d3scatter(sd_mtcars_auto, ~hp, ~mpg, ~factor(cyl),
      x_lim = range(mtcars$hp), y_lim = range(mtcars$mpg),
      width = &quot;100%&quot;, height = 200),
    d3scatter(sd_mtcars_manual, ~hp, ~mpg, ~factor(cyl),
      x_lim = range(mtcars$hp), y_lim = range(mtcars$mpg),
      width = &quot;100%&quot;, height = 200)
  )
)</code></pre>
<div class="container-fluid crosstalk-bscols">
<div class="fluid-row">
<div class="col-xs-8">
<div id="htmlwidget-a94c1e991ec95ef4e9d2" style="width:100%;height:400px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-a94c1e991ec95ef4e9d2">{"x":{"data":{"x":[110,110,93,110,175,105,245,62,95,123,123,180,180,180,205,215,230,66,52,65,97,150,150,245,175,66,91,113,264,175,335,109],"y":[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],"key":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"]},"color_spec":{"type":"ordinal","values":["4","6","8"]},"color":["6","6","4","6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","4","4","4","8","8","8","8","4","4","4","8","6","8","4"],"x_label":"hp","y_label":"mpg","x_lim":[52,335],"y_lim":[10.4,33.9],"group":"mtcars_subset"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="col-xs-4">
<div id="htmlwidget-51e0cc9c126b58c0384a" style="width:100%;height:200px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-51e0cc9c126b58c0384a">{"x":{"data":{"x":[110,175,105,245,62,95,123,123,180,180,180,205,215,230,97,150,150,245,175],"y":[21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,21.5,15.5,15.2,13.3,19.2],"key":["4","5","6","7","8","9","10","11","12","13","14","15","16","17","21","22","23","24","25"],"color":["6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","8","8","8","8"]},"color_spec":{"type":"ordinal","values":["4","6","8"]},"color":["6","8","6","8","4","4","6","6","8","8","8","8","8","8","4","8","8","8","8"],"x_label":"hp","y_label":"mpg","x_lim":[52,335],"y_lim":[10.4,33.9],"group":"mtcars_subset"},"evals":[],"jsHooks":[]}</script>
<div id="htmlwidget-5ba1e4be7509917099f3" style="width:100%;height:200px;" class="d3scatter html-widget"></div>
<script type="application/json" data-for="htmlwidget-5ba1e4be7509917099f3">{"x":{"data":{"x":[110,110,93,66,52,65,66,91,113,264,175,335,109],"y":[21,21,22.8,32.4,30.4,33.9,27.3,26,30.4,15.8,19.7,15,21.4],"key":["1","2","3","18","19","20","26","27","28","29","30","31","32"],"color":["6","6","4","4","4","4","4","4","4","8","6","8","4"]},"color_spec":{"type":"ordinal","values":["4","6","8"]},"color":["6","6","4","4","4","4","4","4","4","8","6","8","4"],"x_label":"hp","y_label":"mpg","x_lim":[52,335],"y_lim":[10.4,33.9],"group":"mtcars_subset"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<p>Note that this example only works because the <code>mtcars</code> data frame has row names.</p>
</div>

<footer>
  <div>&nbsp;</div>
  <div>&nbsp;</div>
  <div class="text-muted">
  Copyright &copy; 2016 RStudio, Inc.
  </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
